{% set name = "javafx-sdk" %}
{% set version = "11.0.11" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://github.com/javafxports/openjdk-jfx/archive/{{ version }}+1.tar.gz
  sha256: 96e14e09335e49732c5e00567ff48efc5f0ef6413482dda814f1d7c7507d0057
  patches:
    - gradle.patch

build:
  number: 0
  skip: true  # [win]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - bison
    - flex
    - gperf
    - pkgconfig
    - ant
    - {{ cdt('libx11-devel') }}  # [linux]
    - {{ cdt('libxxf86vm-devel') }}  # [linux]
    - {{ cdt('mesa-libgl-devel') }}  # [linux]
    - {{ cdt('libpng-devel') }}  # [linux]
    - {{ cdt('libxrandr') }}  # [linux]
    - {{ cdt('libxrandr-devel') }}  # [linux]
    - {{ cdt('libxcursor-devel') }}  # [linux]
    - {{ cdt('libxcomposite-devel') }}  # [linux]
    - {{ cdt('libxdamage-devel') }}  # [linux]
    - {{ cdt('libxinerama-devel') }}  # [linux]
    - {{ cdt('libxtst-devel') }}  # [linux]
  host:
    - coreutils
    - atk
    - gtk2
    - gtk3
    - cairo
    - pango
    - freetype
    - openjdk >=11
    - glib
    - gdk-pixbuf    
    - fontconfig  # [linux]
    - xorg-libx11  # [linux]
    - xorg-libxaw  # [linux]
    - xorg-libxpm  # [linux]
    - xorg-libxfixes  # [linux]
    - xorg-libxft  # [linux]
    - xorg-libxi  # [linux]
    - xorg-libxrandr  # [linux]
    - xorg-libxcursor  # [linux]
    - xorg-libxcomposite  # [linux]
    - xorg-libxdamage  # [linux]
    - xorg-libxinerama  # [linux]
    - xorg-xineramaproto  # [linux]
    - xorg-libxtst  # [linux]
    - font-ttf-dejavu-sans-mono  # [linux]
  run:
    - coreutils
    - atk
    - gtk2
    - gtk3
    - cairo
    - pango
    - freetype
    - openjdk >=11
    - glib
    - gdk-pixbuf    
    - fontconfig  # [linux]
    - xorg-libx11  # [linux]
    - xorg-libxaw  # [linux]
    - xorg-libxpm  # [linux]
    - xorg-libxfixes  # [linux]
    - xorg-libxft  # [linux]
    - xorg-libxi  # [linux]
    - xorg-libxrandr  # [linux]
    - xorg-libxcursor  # [linux]
    - xorg-libxcomposite  # [linux]
    - xorg-libxdamage  # [linux]
    - xorg-libxinerama  # [linux]
    - xorg-xineramaproto  # [linux]
    - xorg-libxtst  # [linux]
    - font-ttf-dejavu-sans-mono  # [linux]
  run_constrained:
    - __osx >={{ MACOSX_DEPLOYMENT_TARGET|default("10.9") }}  # [osx]

test: 
  commands:
    - test -f "${PREFIX}/lib/${PKG_NAME}-${PKG_VERSION%}/lib/javafx.base.jar"

about:
  home: https://gluonhq.com/products/javafx/
  license: GPL-2.0-only
  license_file: LICENSE
  summary: 'JavaFX library for Java'
  description: |
    OpenJFX is an open source, next generation client application platform for desktop, mobile and embedded systems based on JavaSE. It is a collaborative effort by many individuals and companies with the goal of producing a modern, efficient, and fully featured toolkit for developing rich client applications.
  doc_url: https://openjfx.io/
  dev_url: https://github.com/javafxports/openjdk-jfx

extra:
  recipe-maintainers:
    - klugem
